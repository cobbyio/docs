# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is the cobby help documentation website built with Docusaurus 3.8.1. It serves as the primary help center and documentation for cobby, an e-commerce integration tool.

## Commands

### Development
- `npm install` - Install dependencies
- `npm run start` - Start development server (runs on localhost:3000)
- `npm run build` - Build the production-ready static site
- `npm run serve` - Serve the built site locally
- `npm run clear` - Clear Docusaurus cache

### Deployment
The project uses GitLab CI/CD with Docker multi-stage builds. The pipeline has two stages:
- **Build stage**: Creates Docker image with commit SHA tag, using layer caching from previous builds
- **Push stage**:
  - Pushes to `main` branch are tagged as `develop`
  - Git tags trigger production deploys and are tagged as `latest`

## Architecture

### Diataxis Documentation Framework
The documentation follows the **Diataxis framework**, organizing content into four distinct types via separate Docusaurus docs plugins in `docusaurus.config.js`:

- `tutorials/` (route: `/tutorials`) - Learning-oriented guides that take you through a series of steps to complete a project
- `how-to/` (route: `/how-to`) - Problem-solving guides that show how to achieve specific goals (assumes basic knowledge)
- `reference/` (route: `/reference`) - Technical documentation for features, APIs, error codes, and settings
- `explanation/` (route: `/explanation`) - Understanding-oriented documentation about concepts, architecture, and design decisions

Additionally:
- `docs/` - Default docs at root route `/`
- `release-notes/` - Blog-style release notes at `/release-notes`

Each section uses autogenerated sidebars from folder structure. When adding new content, place a `_category_.json` file in each directory to control navigation labels, positions, and slugs.

### Multi-Plugin Architecture
Each documentation section is configured as an independent `@docusaurus/plugin-content-docs` plugin instance with its own ID, route, and path. This modular approach allows independent management of different documentation types while sharing the same sidebar configuration pattern.

### Key Configuration Files
- `docusaurus.config.js` - Main Docusaurus configuration:
  - Four separate docs plugin instances (tutorials, how-to, reference, explanation)
  - Classic preset with default docs and blog (release notes)
  - Google Tag Manager integration (GTM-WWS8BHM)
  - Navbar structure and footer configuration
  - Local search plugin configuration
- `sidebars.js` - Shared sidebar configuration using autogenerated sidebars from directory structure
- `tailwind.config.js` - Tailwind CSS with custom cobby color palette and preflight disabled
- `plugins/tailwind-config.js` - Custom PostCSS plugin for Tailwind integration
- `.env` - Contains BASE_URL for site configuration (copy from `.env.sample`)

### Styling System
- **Tailwind CSS** with utility-first approach
- **Custom cobby color palette**:
  - Primary: `#0064a0` (dark blue)
  - Secondary: `#00aaf0` (light blue)
  - Additional variations: primary-light, primary-lighter, primary-lightest, gray variations
- **Custom CSS** in `src/css/custom.css`:
  - Tailwind directives (@tailwind base/components/utilities)
  - Infima CSS variable overrides
  - Custom component classes using @layer
  - Responsive classes for hero sections, buttons, titles, video embeds, breadcrumbs
- **Syntax highlighting**: Prism with GitHub theme (light mode only)
- **Dark mode**: Disabled site-wide (light mode only)

### Search Integration
Uses `@easyops-cn/docusaurus-search-local` for offline-first search:
- Indexes all content at build time (all four documentation sections + release notes)
- No external API calls or API keys required
- Hashed search index for production
- 10 results per page with 50-character context
- Automatically integrates with navbar

### Custom Components
Located in `src/components/`:
- `Cards.js` - Content card component with title, icon SVG, links list, and CTA button
- `FeatureCardList.js` - Grid container that maps feature arrays to Cards components
- `Header.js` - Page header/hero section with responsive typography
- `Breadcrumbs.js` - Navigation breadcrumbs that parse URL paths (uses react-router-dom)
- `YoutubeVideo.js` - Performance-optimized video embeds using react-lite-youtube-embed
- `Storylane.js` - Interactive demo/walkthrough embeds

### Homepage Structure
`src/pages/index.js` implements a bilingual (English/German) card-based layout using `useDocusaurusContext` for locale detection. The homepage features four main categories with links to key documentation sections. Other custom pages are in `src/pages/`.

## Content Organization Pattern

Each documentation section follows this structure:
```
section/
├── _category_.json          # Section metadata (label, position, slug)
├── index.md                 # Section landing page
└── subdomain/
    ├── _category_.json      # Subcategory metadata
    └── article.md           # Documentation article
```

When adding new categories, create a `_category_.json` file with:
```json
{
  "label": "Display Name",
  "position": 1,
  "link": {
    "type": "generated-index",
    "title": "Title",
    "description": "Description for auto-generated index page",
    "slug": "/custom-route"
  }
}
```

## Docker Build
The `Dockerfile` uses a three-stage build:
1. **Base**: Node.js LTS with corepack enabled
2. **Production Build**: Runs `npm ci` and `npm run build`
3. **Serve**: Alpine nginx image serving static files from `/usr/share/nginx/html`

Custom nginx configuration is in `nginx.conf` (port 80, daemon off).

## Important Notes
- Always use lowercase "cobby" (never "Cobby" or "COBBY")
- The site is light mode only (dark mode switcher disabled)
- Google Tag Manager container: GTM-WWS8BHM
- Redirects configured via `@docusaurus/plugin-client-redirects` plugin
- Search is fully offline (no Algolia or external services)
- Environment variable BASE_URL is required for proper deployment
- use the created agents to write the respective articles as described